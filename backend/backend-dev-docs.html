<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/muffin/blog/rss.xml" title="Muffin - A Research App Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/muffin/blog/atom.xml" title="Muffin - A Research App Blog Atom Feed"><title data-react-helmet="true">**Muffin - App Setup Guide** | Muffin - A Research App</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://alterbrainai.github.io/muffin/backend/backend-dev-docs"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="**Muffin - App Setup Guide** | Muffin - A Research App"><meta data-react-helmet="true" name="description" content="Welcome to the Finance Research App Setup Guide! This document will walk you through the steps to set up and run the application, including both the backend and frontend components. We&#x27;ll cover everything from the directory structure to common issues and their solutions."><meta data-react-helmet="true" property="og:description" content="Welcome to the Finance Research App Setup Guide! This document will walk you through the steps to set up and run the application, including both the backend and frontend components. We&#x27;ll cover everything from the directory structure to common issues and their solutions."><link data-react-helmet="true" rel="shortcut icon" href="/muffin/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://alterbrainai.github.io/muffin/backend/backend-dev-docs"><link data-react-helmet="true" rel="alternate" href="https://alterbrainai.github.io/muffin/backend/backend-dev-docs" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://alterbrainai.github.io/muffin/backend/backend-dev-docs" hreflang="x-default"><link rel="stylesheet" href="/muffin/assets/css/styles.6225b6cb.css">
<link rel="preload" href="/muffin/assets/js/runtime~main.5168907f.js" as="script">
<link rel="preload" href="/muffin/assets/js/main.85670762.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/muffin/"><img src="/muffin/img/muffin_logo.png" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/muffin/img/muffin_logo.png" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">My Site</b></a><a class="navbar__item navbar__link navbar__link--active" href="/muffin/intro">Tutorial</a><a class="navbar__item navbar__link" href="/muffin/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/alterbrainai/muffin" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/muffin/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Sarted</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Backend</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/muffin/backend/backend-dev-docs">**Muffin - App Setup Guide**</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Frontend</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1><strong>Muffin - App Setup Guide</strong></h1></header><p>Welcome to the Finance Research App Setup Guide! This document will walk you through the steps to set up and run the application, including both the backend and frontend components. We&#x27;ll cover everything from the directory structure to common issues and their solutions.</p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="table-of-contents"></a><strong>Table of Contents</strong><a class="hash-link" href="#table-of-contents" title="Direct link to heading">#</a></h2><ul><li><a href="#muffin---app-setup-guide"><strong>Muffin - App Setup Guide</strong></a><ul><li><a href="#table-of-contents"><strong>Table of Contents</strong></a></li><li><a href="#introduction"><strong>Introduction</strong></a></li><li><a href="#directory-structure"><strong>Directory Structure</strong></a><ul><li><a href="#backend-directory-structure"><strong>Backend Directory Structure</strong></a></li><li><a href="#frontend-directory-structure"><strong>Frontend Directory Structure</strong></a></li></ul></li><li><a href="#prerequisites"><strong>Prerequisites</strong></a></li><li><a href="#setting-up-the-backend"><strong>Setting Up the Backend</strong></a><ul><li><a href="#1-clone-the-repository"><strong>1. Clone the Repository</strong></a></li><li><a href="#2-navigate-to-the-backend-directory"><strong>2. Navigate to the Backend Directory</strong></a></li><li><a href="#3-set-up-environment-variables"><strong>3. Set Up Environment Variables</strong></a></li><li><a href="#4-update-requirementstxt"><strong>4. Update <code>requirements.txt</code></strong></a></li><li><a href="#5-create-the-dockerfile"><strong>5. Create the Dockerfile</strong></a></li><li><a href="#6-create-docker-composeyml"><strong>6. Create <code>docker-compose.yml</code></strong></a></li><li><a href="#7-initialize-alembic-for-database-migrations"><strong>7. Initialize Alembic for Database Migrations</strong></a></li><li><a href="#8-update-alembic-configuration"><strong>8. Update Alembic Configuration</strong></a></li><li><a href="#9-create-initial-migration-script"><strong>9. Create Initial Migration Script</strong></a></li><li><a href="#10-build-and-run-docker-containers"><strong>10. Build and Run Docker Containers</strong></a></li><li><a href="#11-run-database-migrations"><strong>11. Run Database Migrations</strong></a></li><li><a href="#12-test-the-backend-api"><strong>12. Test the Backend API</strong></a></li></ul></li><li><a href="#setting-up-the-frontend"><strong>Setting Up the Frontend</strong></a><ul><li><a href="#1-navigate-to-the-frontend-directory"><strong>1. Navigate to the Frontend Directory</strong></a></li><li><a href="#2-install-frontend-dependencies"><strong>2. Install Frontend Dependencies</strong></a></li><li><a href="#3-set-up-environment-variables-1"><strong>3. Set Up Environment Variables</strong></a></li><li><a href="#4-update-nextauthjs-configuration"><strong>4. Update NextAuth.js Configuration</strong></a></li><li><a href="#5-run-the-frontend-application"><strong>5. Run the Frontend Application</strong></a></li></ul></li><li><a href="#testing-the-application"><strong>Testing the Application</strong></a><ul><li><a href="#1-register-a-new-user"><strong>1. Register a New User</strong></a></li><li><a href="#2-log-in-with-the-registered-user"><strong>2. Log In with the Registered User</strong></a></li></ul></li><li><a href="#common-issues-and-solutions"><strong>Common Issues and Solutions</strong></a><ul><li><a href="#issue-1-404-not-found-error"><strong>Issue 1: 404 Not Found Error</strong></a></li><li><a href="#issue-2-alembic-path-doesnt-exist-error"><strong>Issue 2: Alembic Path Doesn&#x27;t Exist Error</strong></a></li><li><a href="#issue-3-duplicatetable-error-in-alembic-migrations"><strong>Issue 3: DuplicateTable Error in Alembic Migrations</strong></a></li><li><a href="#issue-4-bcrypt-attributeerror"><strong>Issue 4: Bcrypt <code>AttributeError</code></strong></a></li><li><a href="#issue-5-invalid-credentials-on-login"><strong>Issue 5: Invalid Credentials on Login</strong></a></li><li><a href="#issue-6-docker-compose-exec-command-issues"><strong>Issue 6: Docker Compose Exec Command Issues</strong></a></li><li><a href="#issue-7-typeerror-err_invalid_url"><strong>Issue 7: TypeError <code>[ERR_INVALID_URL]</code></strong></a></li></ul></li><li><a href="#conclusion"><strong>Conclusion</strong></a></li></ul></li><li><a href="#appendix"><strong>Appendix</strong></a></li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="introduction"></a><strong>Introduction</strong><a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>This guide provides a comprehensive walkthrough for setting up and running the Finance Research App, which includes a FastAPI backend and a Next.js frontend. The application allows users to register, log in, and access protected routes, leveraging technologies like Docker, PostgreSQL, Alembic, and NextAuth.js.</p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="directory-structure"></a><strong>Directory Structure</strong><a class="hash-link" href="#directory-structure" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="backend-directory-structure"></a><strong>Backend Directory Structure</strong><a class="hash-link" href="#backend-directory-structure" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">backend/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ alembic/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ env.py</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ README</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ script.py.mako</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ versions/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â””â”€â”€ [timestamp]_initial_migration.py</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ app/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ __init__.py</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ main.py</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ models.py</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ schemas.py</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ config.py</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ database.py</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ auth/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”œâ”€â”€ hashing.py</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â””â”€â”€ jwt_handler.py</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ routers/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â”œâ”€â”€ auth.py</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â””â”€â”€ users.py</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ Dockerfile</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ requirements.txt</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ docker-compose.yml</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ .env</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ other files...</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="frontend-directory-structure"></a><strong>Frontend Directory Structure</strong><a class="hash-link" href="#frontend-directory-structure" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">frontend/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ pages/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ api/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â””â”€â”€ auth/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚       â””â”€â”€ [...nextauth].ts</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ index.tsx</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ login.tsx</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ other pages...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ components/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ Navbar.tsx</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ other components...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ styles/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ globals.css</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ public/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ .env.local</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ package.json</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ tsconfig.json</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ other configuration files...</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="prerequisites"></a><strong>Prerequisites</strong><a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><p>Before you begin, ensure you have the following installed on your machine:</p><ul><li><strong>Docker</strong> and <strong>Docker Compose</strong></li><li><strong>Node.js</strong> (version 14.x or higher) and <strong>npm</strong></li><li><strong>Python</strong> (version 3.8 or higher)</li><li><strong>Git</strong> (optional, if cloning from a repository)</li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="setting-up-the-backend"></a><strong>Setting Up the Backend</strong><a class="hash-link" href="#setting-up-the-backend" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="1-clone-the-repository"></a><strong>1. Clone the Repository</strong><a class="hash-link" href="#1-clone-the-repository" title="Direct link to heading">#</a></h3><p>If you have a Git repository, clone it. Otherwise, create a new directory for your backend project.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/yourusername/finance-research-app.git</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="2-navigate-to-the-backend-directory"></a><strong>2. Navigate to the Backend Directory</strong><a class="hash-link" href="#2-navigate-to-the-backend-directory" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> finance-research-app/backend</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="3-set-up-environment-variables"></a><strong>3. Set Up Environment Variables</strong><a class="hash-link" href="#3-set-up-environment-variables" title="Direct link to heading">#</a></h3><p>Create a <code>.env</code> file in the <code>backend</code> directory.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> .env</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Contents of <code>.env</code>:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI env"><pre tabindex="0" class="prism-code language-env codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">SECRET_KEY=your-secret-key</span></span><span class="token-line" style="color:#393A34"><span class="token plain">DATABASE_URL=postgresql://demouser:demopassword@db:5432/demodb</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ALGORITHM=HS256</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ACCESS_TOKEN_EXPIRE_MINUTES=30</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Replace <code>your-secret-key</code> with a secure random string.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="4-update-requirementstxt"></a><strong>4. Update <code>requirements.txt</code></strong><a class="hash-link" href="#4-update-requirementstxt" title="Direct link to heading">#</a></h3><p>Ensure your <code>requirements.txt</code> includes the correct dependencies.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fastapi</span></span><span class="token-line" style="color:#393A34"><span class="token plain">uvicorn[standard]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">python-dotenv</span></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlalchemy</span></span><span class="token-line" style="color:#393A34"><span class="token plain">alembic</span></span><span class="token-line" style="color:#393A34"><span class="token plain">psycopg2-binary</span></span><span class="token-line" style="color:#393A34"><span class="token plain">passlib[bcrypt]==1.7.4</span></span><span class="token-line" style="color:#393A34"><span class="token plain">bcrypt==3.2.0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">python-jose[cryptography]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pydantic==1.10.9</span></span><span class="token-line" style="color:#393A34"><span class="token plain">httpx</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pytest</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pytest-asyncio</span></span><span class="token-line" style="color:#393A34"><span class="token plain">bandit</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="5-create-the-dockerfile"></a><strong>5. Create the Dockerfile</strong><a class="hash-link" href="#5-create-the-dockerfile" title="Direct link to heading">#</a></h3><p>Create a <code>Dockerfile</code> in the <code>backend</code> directory.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI dockerfile"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain"># backend/Dockerfile</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM python:3.9-slim</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy the requirements file and install dependencies</span></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY requirements.txt .</span></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pip install --no-cache-dir --upgrade pip &amp;&amp; \</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pip install --no-cache-dir -r requirements.txt</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy the rest of the application code</span></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY . .</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;uvicorn&quot;, &quot;app.main:app&quot;, &quot;--host&quot;, &quot;0.0.0.0&quot;, &quot;--port&quot;, &quot;8000&quot;]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="6-create-docker-composeyml"></a><strong>6. Create <code>docker-compose.yml</code></strong><a class="hash-link" href="#6-create-docker-composeyml" title="Direct link to heading">#</a></h3><p>Create a <code>docker-compose.yml</code> file in the <code>backend</code> directory.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3.8&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> .</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> .</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/app</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;8000:8000&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> db</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">env_file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> .env</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">db</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">14</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> postgres_data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/lib/postgresql/data/</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> POSTGRES_USER=demouser</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> POSTGRES_PASSWORD=demopassword</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> POSTGRES_DB=demodb</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5432:5432&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  postgres_data</span><span class="token punctuation" style="color:#393A34">:</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="7-initialize-alembic-for-database-migrations"></a><strong>7. Initialize Alembic for Database Migrations</strong><a class="hash-link" href="#7-initialize-alembic-for-database-migrations" title="Direct link to heading">#</a></h3><p>Initialize Alembic in the <code>backend</code> directory.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">alembic init alembic</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="8-update-alembic-configuration"></a><strong>8. Update Alembic Configuration</strong><a class="hash-link" href="#8-update-alembic-configuration" title="Direct link to heading">#</a></h3><ul><li><strong>Edit <code>alembic.ini</code>:</strong> Set the database URL to read from the environment variable.</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ini"><pre tabindex="0" class="prism-code language-ini codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain"># In alembic.ini</span></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlalchemy.url = ${DATABASE_URL}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li><strong>Edit <code>alembic/env.py</code>:</strong></li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># alembic/env.py</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> fileConfig</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> sqlalchemy </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> engine_from_config</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> sqlalchemy </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pool</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> alembic </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> context</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> sys</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Add your app directory to sys.path</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dirname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__file__</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;..&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">models </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Base  </span><span class="token comment" style="color:#999988;font-style:italic"># Import your models here</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Interpret the config file for Python logging.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">fileConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">config_file_name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Get the database URL from the environment variable</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">set_main_option</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;sqlalchemy.url&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;DATABASE_URL&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">target_metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Base</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">metadata</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="9-create-initial-migration-script"></a><strong>9. Create Initial Migration Script</strong><a class="hash-link" href="#9-create-initial-migration-script" title="Direct link to heading">#</a></h3><p>Generate the initial migration script.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">alembic revision --autogenerate -m </span><span class="token string" style="color:#e3116c">&quot;Initial migration&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="10-build-and-run-docker-containers"></a><strong>10. Build and Run Docker Containers</strong><a class="hash-link" href="#10-build-and-run-docker-containers" title="Direct link to heading">#</a></h3><p>Build and start the Docker containers.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> build --no-cache</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> up -d</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="11-run-database-migrations"></a><strong>11. Run Database Migrations</strong><a class="hash-link" href="#11-run-database-migrations" title="Direct link to heading">#</a></h3><p>Apply the migrations to the database.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> </span><span class="token builtin class-name">exec</span><span class="token plain"> backend alembic upgrade </span><span class="token function" style="color:#d73a49">head</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="12-test-the-backend-api"></a><strong>12. Test the Backend API</strong><a class="hash-link" href="#12-test-the-backend-api" title="Direct link to heading">#</a></h3><ul><li><p><strong>Access the API Documentation:</strong></p><p>Visit <code>http://localhost:8000/docs</code> in your browser.</p></li><li><p><strong>Test the Root Endpoint:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://localhost:8000/</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Expected Response:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;message&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Welcome to the Finance Research API&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="setting-up-the-frontend"></a><strong>Setting Up the Frontend</strong><a class="hash-link" href="#setting-up-the-frontend" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="1-navigate-to-the-frontend-directory"></a><strong>1. Navigate to the Frontend Directory</strong><a class="hash-link" href="#1-navigate-to-the-frontend-directory" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/frontend</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="2-install-frontend-dependencies"></a><strong>2. Install Frontend Dependencies</strong><a class="hash-link" href="#2-install-frontend-dependencies" title="Direct link to heading">#</a></h3><p>Install the necessary packages using npm.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="3-set-up-environment-variables-1"></a><strong>3. Set Up Environment Variables</strong><a class="hash-link" href="#3-set-up-environment-variables-1" title="Direct link to heading">#</a></h3><p>Create a <code>.env.local</code> file in the <code>frontend</code> directory.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> .env.local</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Contents of <code>.env.local</code>:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI env"><pre tabindex="0" class="prism-code language-env codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">NEXT_PUBLIC_API_URL=http://localhost:8000</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NEXTAUTH_SECRET=your-secret-key</span></span><span class="token-line" style="color:#393A34"><span class="token plain">NEXTAUTH_URL=http://localhost:3000</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Ensure <code>NEXTAUTH_SECRET</code> matches <code>SECRET_KEY</code> in the backend <code>.env</code> file.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="4-update-nextauthjs-configuration"></a><strong>4. Update NextAuth.js Configuration</strong><a class="hash-link" href="#4-update-nextauthjs-configuration" title="Direct link to heading">#</a></h3><p>Edit <code>frontend/pages/api/auth/[...nextauth].ts</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// frontend/pages/api/auth/[...nextauth].ts</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> NextAuth </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;next-auth&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> CredentialsProvider </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;next-auth/providers/credentials&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> axios </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;axios&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NextAuth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  providers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">CredentialsProvider</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Credentials&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      credentials</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        username</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> label</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Username&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;text&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        password</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> label</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Password&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;password&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">authorize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">credentials</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">credentials</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;No credentials provided&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">process</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation">env</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation constant" style="color:#36acaa">NEXT_PUBLIC_API_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/api/auth/login</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> axios</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">              username</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> credentials</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">username</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">              password</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> credentials</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">password</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">              headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string-property property" style="color:#36acaa">&#x27;Content-Type&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> user </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">access_token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">...</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> username</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> credentials</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">username </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            error</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">response</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">data</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">detail </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Invalid credentials&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  callbacks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">jwt</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> user </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        token</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">accessToken </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">access_token</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        token</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">username </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">username</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">session</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> session</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> token </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      session</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">accessToken </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">accessToken</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      session</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">user </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        username</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">username</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> session</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  secret</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">NEXTAUTH_SECRET</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  session</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    strategy</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;jwt&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  debug</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Enable debug mode for detailed logs</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="5-run-the-frontend-application"></a><strong>5. Run the Frontend Application</strong><a class="hash-link" href="#5-run-the-frontend-application" title="Direct link to heading">#</a></h3><p>Start the Next.js development server.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> run dev</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>The application should be running at <code>http://localhost:3000</code>.</li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="testing-the-application"></a><strong>Testing the Application</strong><a class="hash-link" href="#testing-the-application" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="1-register-a-new-user"></a><strong>1. Register a New User</strong><a class="hash-link" href="#1-register-a-new-user" title="Direct link to heading">#</a></h3><ul><li><p><strong>Using the Frontend:</strong></p><ul><li>Navigate to the registration page (if implemented).</li><li>Fill in the username and password fields.</li><li>Submit the form.</li></ul></li><li><p><strong>Using <code>curl</code>:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST </span><span class="token string" style="color:#e3116c">&quot;http://localhost:8000/api/auth/register&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H </span><span class="token string" style="color:#e3116c">&quot;Content-Type: application/json&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&#x27;{&quot;username&quot;: &quot;testuser&quot;, &quot;password&quot;: &quot;testpassword&quot;}&#x27;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Expected Response:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;username&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;testuser&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="2-log-in-with-the-registered-user"></a><strong>2. Log In with the Registered User</strong><a class="hash-link" href="#2-log-in-with-the-registered-user" title="Direct link to heading">#</a></h3><ul><li><p><strong>Using the Frontend:</strong></p><ul><li>Navigate to the login page.</li><li>Enter the username and password.</li><li>Submit the form.</li></ul></li><li><p><strong>Using <code>curl</code>:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X POST </span><span class="token string" style="color:#e3116c">&quot;http://localhost:8000/api/auth/login&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H </span><span class="token string" style="color:#e3116c">&quot;Content-Type: application/json&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d </span><span class="token string" style="color:#e3116c">&#x27;{&quot;username&quot;: &quot;testuser&quot;, &quot;password&quot;: &quot;testpassword&quot;}&#x27;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Expected Response:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;access_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your_jwt_token&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;token_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bearer&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="3-access-protected-routes"></a><strong>3. Access Protected Routes</strong><a class="hash-link" href="#3-access-protected-routes" title="Direct link to heading">#</a></h3><ul><li><p><strong>Using the Frontend:</strong></p><ul><li>After logging in, attempt to access protected pages that require authentication.</li></ul></li><li><p><strong>Using <code>curl</code>:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -X GET </span><span class="token string" style="color:#e3116c">&quot;http://localhost:8000/api/protected-route&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H </span><span class="token string" style="color:#e3116c">&quot;Authorization: Bearer your_jwt_token&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Replace <code>your_jwt_token</code> with the actual token received during login.</strong></p></li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="common-issues-and-solutions"></a><strong>Common Issues and Solutions</strong><a class="hash-link" href="#common-issues-and-solutions" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="issue-1-404-not-found-error"></a><strong>Issue 1: 404 Not Found Error</strong><a class="hash-link" href="#issue-1-404-not-found-error" title="Direct link to heading">#</a></h3><p><strong>Problem:</strong> Accessing <code>http://localhost:8000/</code> returns a 404 error.</p><p><strong>Solution:</strong></p><ul><li><p><strong>Add a Root Endpoint in <code>app/main.py</code>:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@app</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tags</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;Root&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">read_root</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;message&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Welcome to the Finance Research API&quot;</span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="issue-2-alembic-path-doesnt-exist-error"></a><strong>Issue 2: Alembic Path Doesn&#x27;t Exist Error</strong><a class="hash-link" href="#issue-2-alembic-path-doesnt-exist-error" title="Direct link to heading">#</a></h3><p><strong>Problem:</strong> Alembic cannot find the <code>alembic</code> directory inside the Docker container.</p><p><strong>Solution:</strong></p><ul><li><strong>Ensure the <code>alembic</code> Directory Is Included in the Docker Image:</strong><ul><li>Use <code>COPY . .</code> in your <code>Dockerfile</code>.</li><li>Ensure <code>.dockerignore</code> doesn&#x27;t exclude the <code>alembic</code> directory.</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="issue-3-duplicatetable-error-in-alembic-migrations"></a><strong>Issue 3: DuplicateTable Error in Alembic Migrations</strong><a class="hash-link" href="#issue-3-duplicatetable-error-in-alembic-migrations" title="Direct link to heading">#</a></h3><p><strong>Problem:</strong> Alembic raises a <code>DuplicateTable</code> error when running migrations.</p><p><strong>Solution:</strong></p><ul><li><p><strong>Remove <code>Base.metadata.create_all()</code> from <code>app/main.py</code>:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Remove or comment out the following line</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Base.metadata.create_all(bind=engine)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p><strong>Drop Existing Tables if Safe:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> </span><span class="token builtin class-name">exec</span><span class="token plain"> db psql -U demouser -d demodb</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sql"><pre tabindex="0" class="prism-code language-sql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">DROP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> users </span><span class="token keyword" style="color:#00009f">CASCADE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">\q</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="issue-4-bcrypt-attributeerror"></a><strong>Issue 4: Bcrypt <code>AttributeError</code></strong><a class="hash-link" href="#issue-4-bcrypt-attributeerror" title="Direct link to heading">#</a></h3><p><strong>Problem:</strong> <code>AttributeError: module &#x27;bcrypt&#x27; has no attribute &#x27;__about__&#x27;</code></p><p><strong>Solution:</strong></p><ul><li><p><strong>Ensure Compatible Versions in <code>requirements.txt</code>:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">passlib[bcrypt]==1.7.4</span></span><span class="token-line" style="color:#393A34"><span class="token plain">bcrypt==3.2.0</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p><strong>Rebuild Docker Containers:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> down</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> build --no-cache</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> up -d</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="issue-5-invalid-credentials-on-login"></a><strong>Issue 5: Invalid Credentials on Login</strong><a class="hash-link" href="#issue-5-invalid-credentials-on-login" title="Direct link to heading">#</a></h3><p><strong>Problem:</strong> Unable to log in; the frontend shows &quot;Invalid credentials.&quot;</p><p><strong>Solution:</strong></p><ul><li><p><strong>Ensure the Frontend Sends the Correct Data Format:</strong></p><ul><li>The <code>authorize</code> function in NextAuth.js should send JSON payloads.</li></ul></li><li><p><strong>Update <code>authorize</code> Function:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> axios</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">process</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation">env</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation constant" style="color:#36acaa">NEXT_PUBLIC_API_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/api/auth/login</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    username</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> credentials</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">username</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    password</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> credentials</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">password</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&#x27;Content-Type&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p><strong>Check NextAuth.js Callbacks and Configuration.</strong></p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="issue-6-docker-compose-exec-command-issues"></a><strong>Issue 6: Docker Compose Exec Command Issues</strong><a class="hash-link" href="#issue-6-docker-compose-exec-command-issues" title="Direct link to heading">#</a></h3><p><strong>Problem:</strong> Unable to run <code>docker-compose exec</code> commands; &quot;No configuration file provided: not found.&quot;</p><p><strong>Solution:</strong></p><ul><li><p><strong>Ensure You&#x27;re in the Correct Directory:</strong></p><ul><li>Navigate to the directory containing <code>docker-compose.yml</code>.</li></ul></li><li><p><strong>Use the Correct Command:</strong></p><ul><li>Use <code>docker-compose</code> (with a hyphen) if using Docker Compose v1.</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="issue-7-typeerror-err_invalid_url"></a><strong>Issue 7: TypeError <code>[ERR_INVALID_URL]</code></strong><a class="hash-link" href="#issue-7-typeerror-err_invalid_url" title="Direct link to heading">#</a></h3><p><strong>Problem:</strong> <code>TypeError [ERR_INVALID_URL]</code> due to invalid URL in the <code>authorize</code> function.</p><p><strong>Solution:</strong></p><ul><li><p><strong>Use Backticks for String Interpolation:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">process</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation">env</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation constant" style="color:#36acaa">NEXT_PUBLIC_API_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/api/auth/login</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="conclusion"></a><strong>Conclusion</strong><a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>By following this guide, you should have a fully functional Finance Research App with both the backend and frontend running seamlessly. We&#x27;ve covered setting up the environment, configuring Docker and Docker Compose, handling database migrations with Alembic, and integrating authentication using NextAuth.js.</p><p>If you encounter any further issues or have questions about any of the steps, feel free to revisit the relevant sections in this guide. Happy coding!</p><hr><p><strong>Note:</strong> Always ensure your environment variables are kept secure and not exposed in version control systems. Use tools like <code>.gitignore</code> to prevent sensitive files from being committed.</p><header><h1><strong>Appendix</strong></h1></header><ul><li><p><strong>Useful Commands:</strong></p><ul><li><p><strong>View Docker Logs:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> logs backend</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p><strong>Access Backend Container Shell:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> </span><span class="token builtin class-name">exec</span><span class="token plain"> backend </span><span class="token function" style="color:#d73a49">bash</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p><strong>Check Installed Python Packages in Container:</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">pip show passlib</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pip show bcrypt</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ul></li><li><p><strong>Helpful Links:</strong></p><ul><li><a href="https://fastapi.tiangolo.com/" target="_blank" rel="noopener noreferrer">FastAPI Documentation</a></li><li><a href="https://nextjs.org/docs" target="_blank" rel="noopener noreferrer">Next.js Documentation</a></li><li><a href="https://next-auth.js.org/getting-started/introduction" target="_blank" rel="noopener noreferrer">NextAuth.js Documentation</a></li><li><a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer">Docker Documentation</a></li><li><a href="https://alembic.sqlalchemy.org/en/latest/" target="_blank" rel="noopener noreferrer">Alembic Documentation</a></li></ul></li></ul><hr><p>Happy developing!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/alterbrainai/muffin/edit/main/docs/docs/backend/backend-dev-docs.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/muffin/getting-started/installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Installation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/muffin/frontend/frontend-dev-docs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">**Finance Research App Development Documentation** Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#table-of-contents" class="table-of-contents__link"><strong>Table of Contents</strong></a></li><li><a href="#introduction" class="table-of-contents__link"><strong>Introduction</strong></a></li><li><a href="#directory-structure" class="table-of-contents__link"><strong>Directory Structure</strong></a><ul><li><a href="#backend-directory-structure" class="table-of-contents__link"><strong>Backend Directory Structure</strong></a></li><li><a href="#frontend-directory-structure" class="table-of-contents__link"><strong>Frontend Directory Structure</strong></a></li></ul></li><li><a href="#prerequisites" class="table-of-contents__link"><strong>Prerequisites</strong></a></li><li><a href="#setting-up-the-backend" class="table-of-contents__link"><strong>Setting Up the Backend</strong></a><ul><li><a href="#1-clone-the-repository" class="table-of-contents__link"><strong>1. Clone the Repository</strong></a></li><li><a href="#2-navigate-to-the-backend-directory" class="table-of-contents__link"><strong>2. Navigate to the Backend Directory</strong></a></li><li><a href="#3-set-up-environment-variables" class="table-of-contents__link"><strong>3. Set Up Environment Variables</strong></a></li><li><a href="#4-update-requirementstxt" class="table-of-contents__link"><strong>4. Update <code>requirements.txt</code></strong></a></li><li><a href="#5-create-the-dockerfile" class="table-of-contents__link"><strong>5. Create the Dockerfile</strong></a></li><li><a href="#6-create-docker-composeyml" class="table-of-contents__link"><strong>6. Create <code>docker-compose.yml</code></strong></a></li><li><a href="#7-initialize-alembic-for-database-migrations" class="table-of-contents__link"><strong>7. Initialize Alembic for Database Migrations</strong></a></li><li><a href="#8-update-alembic-configuration" class="table-of-contents__link"><strong>8. Update Alembic Configuration</strong></a></li><li><a href="#9-create-initial-migration-script" class="table-of-contents__link"><strong>9. Create Initial Migration Script</strong></a></li><li><a href="#10-build-and-run-docker-containers" class="table-of-contents__link"><strong>10. Build and Run Docker Containers</strong></a></li><li><a href="#11-run-database-migrations" class="table-of-contents__link"><strong>11. Run Database Migrations</strong></a></li><li><a href="#12-test-the-backend-api" class="table-of-contents__link"><strong>12. Test the Backend API</strong></a></li></ul></li><li><a href="#setting-up-the-frontend" class="table-of-contents__link"><strong>Setting Up the Frontend</strong></a><ul><li><a href="#1-navigate-to-the-frontend-directory" class="table-of-contents__link"><strong>1. Navigate to the Frontend Directory</strong></a></li><li><a href="#2-install-frontend-dependencies" class="table-of-contents__link"><strong>2. Install Frontend Dependencies</strong></a></li><li><a href="#3-set-up-environment-variables-1" class="table-of-contents__link"><strong>3. Set Up Environment Variables</strong></a></li><li><a href="#4-update-nextauthjs-configuration" class="table-of-contents__link"><strong>4. Update NextAuth.js Configuration</strong></a></li><li><a href="#5-run-the-frontend-application" class="table-of-contents__link"><strong>5. Run the Frontend Application</strong></a></li></ul></li><li><a href="#testing-the-application" class="table-of-contents__link"><strong>Testing the Application</strong></a><ul><li><a href="#1-register-a-new-user" class="table-of-contents__link"><strong>1. Register a New User</strong></a></li><li><a href="#2-log-in-with-the-registered-user" class="table-of-contents__link"><strong>2. Log In with the Registered User</strong></a></li><li><a href="#3-access-protected-routes" class="table-of-contents__link"><strong>3. Access Protected Routes</strong></a></li></ul></li><li><a href="#common-issues-and-solutions" class="table-of-contents__link"><strong>Common Issues and Solutions</strong></a><ul><li><a href="#issue-1-404-not-found-error" class="table-of-contents__link"><strong>Issue 1: 404 Not Found Error</strong></a></li><li><a href="#issue-2-alembic-path-doesnt-exist-error" class="table-of-contents__link"><strong>Issue 2: Alembic Path Doesn&#39;t Exist Error</strong></a></li><li><a href="#issue-3-duplicatetable-error-in-alembic-migrations" class="table-of-contents__link"><strong>Issue 3: DuplicateTable Error in Alembic Migrations</strong></a></li><li><a href="#issue-4-bcrypt-attributeerror" class="table-of-contents__link"><strong>Issue 4: Bcrypt <code>AttributeError</code></strong></a></li><li><a href="#issue-5-invalid-credentials-on-login" class="table-of-contents__link"><strong>Issue 5: Invalid Credentials on Login</strong></a></li><li><a href="#issue-6-docker-compose-exec-command-issues" class="table-of-contents__link"><strong>Issue 6: Docker Compose Exec Command Issues</strong></a></li><li><a href="#issue-7-typeerror-err_invalid_url" class="table-of-contents__link"><strong>Issue 7: TypeError <code>[ERR_INVALID_URL]</code></strong></a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link"><strong>Conclusion</strong></a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/muffin/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/muffin/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/alterbrainai/muffin" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/muffin/assets/js/runtime~main.5168907f.js"></script>
<script src="/muffin/assets/js/main.85670762.js"></script>
</body>
</html>